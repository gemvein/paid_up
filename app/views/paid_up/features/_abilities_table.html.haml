%table.abilities.table.table-bordered{ html_options }
  - for feature in features
    %tr{ id: feature.slug + '_ability'}
      %th= feature.title
      %td
        - case feature.setting_type
          - when 'boolean'
            - if can? :use, feature.slug.to_sym
              = icon 'ok'
            - else
              = icon 'remove'
          - when 'table_rows'
            - if can? :own, feature.feature_model
              = icon 'ok'
            - else
              = icon 'remove'
            - if current_user.table_rows_unlimited?(feature.slug)
              = :unlimited.l
            - else
              = :x_of_y_remaining.l x: current_user.table_rows_remaining(feature.slug), y: current_user.table_rows_allowed(feature.slug)
          - when 'rolify_rows'
            - if can? :own, feature.feature_model
              = icon 'ok'
            - else
              = icon 'remove'
            - if current_user.rolify_rows_unlimited?(feature.slug)
              = :unlimited.l
            - else
              = :x_of_y_remaining.l x: current_user.rolify_rows_remaining(feature.slug), y: current_user.rolify_rows_allowed(feature.slug)
          - else
            = :error.l